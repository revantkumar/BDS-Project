When an US company hires an international student , it has to pay extra expense :
(1) To hire a international student with OPT extension, the company has to be qualified to enroll the e-verify program. This requires a lot of paper work and the release of companys private information.

(2) In order to hire the international students for more than 2 year to complete the projects, the company also need to provide H1B sponsorship which is extremely costly. 

Obviously, hiring international students is not as convenient and cost efficient as hiring local Americans. Nevertheless, many tech companies are willing to pay the premium price to hire the international students to keep up with their business growth. This is especially true for the companies in IT industry such as Facebook ,Google etc. The explanation for this fact is the demand for the qualified job candidates has outpaced the supply. The U.S university are not producing enough graduates to meet the demand. If US decided to deport the international students with STEM major, it will be difficult to maintain its global dominance in technology. 

The moment that U.S. government decides to deprive the opportunities from international students to work for a U.S. employer, it also lose the capability to attract and maintain the best talents. 