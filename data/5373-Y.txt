The economy grows, especially the IT industry grows fast. There are so many companies and startups that needs educated IT people. Yes Americans are smart enough to program very well, but there are only limited people who can do those jobs. And that is certainly not enough for those employers. 
If we don't allow international students to work for them, there will be a shortage of those IT workers. What will happen next? Companies need to pay more to get a programmer. And they can't get enough people to do the work, the economy growth slows down. No one wins.
You say those American programmers win because they get paid more? No! They need to do more work!