From what I know, people who receive h1b from STEM-OPT status only comprises a small portion of the total population of h1b recipients. And they all come to the U.S. under legal status.

Those big consulting companies such as Infosys, Tata and Wipro hire thousands of h1b visa workers each year, from foreign countries. Here is a list of h1b stats by companies, 

www.myvisajobs.com/Reports/2014-H1B-Visa-Sponsor.aspx